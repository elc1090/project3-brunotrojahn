<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App teste</title>

    <link rel="manifest" href="../manifest.json">
    <link rel="stylesheet" href="../dist/styles.css">
    <script src="app.js"></script>
</head>
<body>
    <h1 class="text-3xl text-gray-400">hello world</h1>
    <button id="install-button" class="bg-blue-200 p-2">Instalar app</button>
</body>
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('service-worker.js')
                .then(registration => {
                    console.log('Service Worker registrado com sucesso:', registration.scope);
                })
                .catch(error => {
                    console.log('Falha ao registrar o Service Worker:', error);
                });
        });
    }

    const installButton = document.getElementById('install-button');

    window.addEventListener('beforeinstallprompt', event => {
        event.preventDefault();
        const deferredPrompt = event;
        console.log('aqui')
        installButton.style.display = 'block';
        installButton.addEventListener('click', () => {
            installButton.style.display = 'none';
            deferredPrompt.prompt();
            deferredPrompt.userChoice
                .then(choiceResult => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('O aplicativo foi instalado com sucesso!');
                    } else {
                        console.log('O usuário cancelou a instalação.');
                    }
                    deferredPrompt = null;
                });
        });
    });

</script>

</html>